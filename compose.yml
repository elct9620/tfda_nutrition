services:
  autonoe:
    build:
      context: .
      dockerfile_inline: |
        FROM ghcr.io/elct9620/autonoe/cli:python
        RUN apt-get update && apt-get install -y sqlite3 && rm -rf /var/lib/apt/lists/*
    volumes:
      - .:/workspace
      - ./.gitconfig.container:/root/.gitconfig:ro
      - /run/host-services/ssh-auth.sock:/run/host-services/ssh-auth.sock
    working_dir: /workspace
    environment:
      CLAUDE_CODE_OAUTH_TOKEN: ${CLAUDE_CODE_OAUTH_TOKEN:-}
      SSH_AUTH_SOCK: /run/host-services/ssh-auth.sock
